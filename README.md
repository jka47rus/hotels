# Hotels

Бэкенд сервис бронирования отелей, созданный с использованием Spring MVC, Spring Data JDBC, Spring Security. Запуск и
настройка баз данных Postgres, MongoDb и Kafka производится через Docker-файлы в папке docker.

В приложении реализованы сущности:

1. Hotel. Каждый отель имеет свой рейтинг. Контроллер выполнения CRUD-операций с помощью REST API содержит следующие
   методы:
    - метод поиска по ID конкретного отеля;
    - создание отеля;
    - редактирование отеля;
    - удаление отеля;
    - выставление рейтинга отеля;
    - получение списка всех имеющихся отелей. Имеется возможность фильтрации по следующим категориям:
      ○ ID отеля;
      ○ название отеля;
      ○ заголовок объявления;
      ○ город;
      ○ адрес;
      ○ расстояние до центра города;
      ○ рейтинг и число рейтингов.
2. Room. Контроллер выполнения CRUD-операций с помощью REST API содержит следующие методы:
    - метод поиска по ID конкретной комнаты;
    - создание комнаты;
    - редактирование комнаты;
    - удаление комнаты
    - получение списка всех имеющихся комнат. Имеется возможность фильтрации по следующим категориям:
      ○ ID комнаты;
      ○ заголовок;
      ○ минимальная и максимальная цена;
      ○ количество гостей в комнате;
      ○ дата заезда и дата выезда;
      ○ ID отеля.
3. User. Контроллер выполнения CRUD-операций с помощью REST API содержит следующие методы:
    - создавать нового пользователя;
    - искать пользователя по ID;
    - искать пользователя по имени.
4. Booking. Контроллер выполнения CRUD-операций с помощью REST API содержит следующие методы:
    - бронирования комнаты. Забронировать комнату могут разные пользователи и несколько раз, только на свободные даты;
    - получения всех оформленных броней.
   
Добавлена возможность задавать параметры пагинации на запрос поиска findAll в сущности (количество сущностей на странице 
и номер страницы).

В приложении реализован сервис статистики, который работает с Kafka (получение статистической информации) и MongoDB 
(хранение информации), с методом выгрузки статистических данных в CSV-файл.
В сервисе есть два события:
1. регистрация пользователя. При регистрации сохраняются данные о созданном пользователе (его ID);
2. бронирование комнаты. При бронировании комнаты сохраняются данные о пользователе, который оформил бронь (его ID), а
   также о датах заезда и выезда.
Данные по этим событиям хранятся в MongoDB в формате JSON.

В приложении реализованна basic authentication с помощью Spring Security. Пользователи могут иметь роли: ROLE_ADMIN,
ROLE_USER.

1. Регистрация пользователя доступна без авторизации;
2. создание, редактирование и удаление отелей доступно только администратору;
3. создание, редактирование и удаление комнат доступно только администратору;
4. получение списка броней доступно только администратору;
5. все остальные методы доступны и пользователю, и администратору, но только при авторизации.
